{"componentChunkName":"component---src-templates-blog-post-js","path":"/2020-10-22-c-sharp-element-at/","result":{"data":{"site":{"siteMetadata":{"title":"LAP-TECH"}},"markdownRemark":{"id":"fd9ca41f-a2b8-5086-8182-d6a962939e64","excerpt":"假設依家有一個 , 我地想係入面  某一個  既  出黎 由於 Dictionary 本身唔係一個有 Index 既 Data Structure, 唔可以直接拎個 item 出黎 呢個情況底下我地有幾個選擇 直接行一個Loop, Loop 到第 N 個 Element 就 return…","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c2bfd062671bad55a936de8af2247084/28be2/cover.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.70270270270271%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHutSCq/8QAFxAAAwEAAAAAAAAAAAAAAAAAARARIP/aAAgBAQABBQI4i//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABoQAAMAAwEAAAAAAAAAAAAAAAABERAxcYH/2gAIAQEAAT8hTr4ze017iEWkP//aAAwDAQACAAMAAAAQGw//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPxCH/8QAHxABAAIBAwUAAAAAAAAAAAAAAQARkSFRYTFBgcHw/9oACAEBAAE/ECe3ifcQe5H0ZRu5lOcxQK7OmrKc5n//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Binding\"\n        title=\"Binding\"\n        src=\"/static/c2bfd062671bad55a936de8af2247084/1c72d/cover.jpg\"\n        srcset=\"/static/c2bfd062671bad55a936de8af2247084/a80bd/cover.jpg 148w,\n/static/c2bfd062671bad55a936de8af2247084/1c91a/cover.jpg 295w,\n/static/c2bfd062671bad55a936de8af2247084/1c72d/cover.jpg 590w,\n/static/c2bfd062671bad55a936de8af2247084/28be2/cover.jpg 786w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>假設依家有一個 <code class=\"language-text\">Dictionary</code>, 我地想係入面 <code class=\"language-text\">get</code> 某一個 <code class=\"language-text\">index</code> 既 <code class=\"language-text\">element</code> 出黎</p>\n<p>由於 Dictionary 本身唔係一個有 Index 既 Data Structure, 唔可以直接拎個 item 出黎</p>\n<p>呢個情況底下我地有幾個選擇</p>\n<ol>\n<li>\n<p>直接行一個Loop, Loop 到第 N 個 Element 就 return 佢出黎</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token class-name\"><span class=\"token keyword\">int</span></span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">foreach</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">KeyValuePair<span class=\"token punctuation\">&lt;</span>K<span class=\"token punctuation\">,</span> V<span class=\"token punctuation\">></span></span> pair <span class=\"token keyword\">in</span> Dictionary<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">&lt;</span> index<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\ni <span class=\"token operator\">++</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n<span class=\"token keyword\">return</span> pair<span class=\"token punctuation\">.</span>Value<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>用 <code class=\"language-text\">LINQ</code> 既 <code class=\"language-text\">ElementAt</code> 執個 Element 出黎</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token keyword\">return</span> Dictionary<span class=\"token punctuation\">.</span>Values<span class=\"token punctuation\">.</span><span class=\"token function\">ElementAt</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n<li>\n<p>直接 Convert Dictionary.Values 做一條 List 然後再 Get 出黎</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token class-name\">List<span class=\"token punctuation\">&lt;</span>V<span class=\"token punctuation\">></span></span> listOfValues <span class=\"token operator\">=</span> Dictionay<span class=\"token punctuation\">.</span>Values<span class=\"token punctuation\">.</span><span class=\"token function\">ToList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">return</span> listOfValues<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n</ol>\n<h3>講多無謂 數字最實際</h3>\n<p>依家我地會 Create 一個有 100,000 隻 item 既 Dictionary, 然後用上面既方法搵番第 N 個 element出黎</p>\n<table>\n<thead>\n<tr>\n<th>Method</th>\n<th>Elapsed Time</th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>for-loop</td>\n<td>31190ms</td>\n<td></td>\n</tr>\n<tr>\n<td>ElementAt</td>\n<td>31712ms</td>\n<td></td>\n</tr>\n<tr>\n<td>Converted List</td>\n<td>2ms</td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<p>癡線! 連埋 Dictionay.Values.ToList() 都係2ms! 就咁睇都知應該要用邊個! 不過用 Converted List 就會用多左 Memory 喇</p>","frontmatter":{"title":"WPF ElementAt 慢過龜","date":"October 22, 2020"}}},"pageContext":{"slug":"/2020-10-22-c-sharp-element-at/","previous":{"fields":{"slug":"/2020-08-24-wpf-get-path/"},"frontmatter":{"title":"C# 尋路人"}},"next":{"fields":{"slug":"/2020-11-09-wpf-binding-element-name/"},"frontmatter":{"title":"寫在WPF Binding ElementName時"}}}}}